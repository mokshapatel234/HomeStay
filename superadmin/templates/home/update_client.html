{% extends 'layouts/base.html' %}


{% block head %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
{% endblock head %}


{% block title %} Profile {% endblock title %}

{% block content %}


<!-- Page content -->
    <div class="col-xl-12">
      <div class="card">
        <div class="card-header">
          <div class="row align-items-center">
            <div class="col-8">
              <h3 class="mb-0">Client Management</h3>
            </div>
           
          </div>
        </div>
        <div class="card-body">
          <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {% if msg %}
                <p class="text-danger"> *{{msg}} </p>
              {% endif %}
            <h6 class="heading-small text-muted mb-4">User information</h6>
            <div class="pl-lg-4">
                <div class="row">
                 
               
                
                  <div class="col-lg-6">
                    <div class="form-group">
                      <label class="form-control-label" >First name</label>
                      <input type="text" class="form-control" placeholder="First name" name="first_name" value="{{client.first_name}}">
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="form-group">
                      <label class="form-control-label" >Last name</label>
                      <input type="text" class="form-control" placeholder="Last name" name="last_name" value="{{client.last_name}}">
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="form-group">
                      <label class="form-control-label" >Email address</label>
                      <input type="email" class="form-control" placeholder="Email" name="email" value="{{client.email}}">
                    </div>
                  </div>
                 
                  <div class="col-lg-6">
                    <div class="form-group">
                      <label class="form-control-label">Profile Image</label>
                      <input type="file" id="root-input-image" class="form-control" placeholder="Root Images" name="profile_image" required accept=".jpg, .jpeg, .png, .webp">
                      <!-- Display the root image preview -->
                      <img id="root-image" class="img-thumbnail" style="max-width: 200px; margin-right: 10px;">
                    </div>
                    {% if client.profile_image %} 
                      <img style="height: 150px; width: 200px;" src="{{ client.profile_image.url }}" alt="Root Image">
                      {% endif %}
                  </div>
                  <div class="col-lg-6">
                    <div class="form-group">
                      <label class="form-control-label" >contact_no</label>
                      <input type="text" class="form-control" placeholder="Contact No" name="contact_no" value="{{client.contact_no}}" oninput="javascript: if (this.value.length > 10) this.value = this.value.slice(0, 10);">
                    </div>
                  </div>
            
              
                <div class="col-lg-6">
                  <div class="form-group">
                    <label class="form-control-label" >Status</label>
                    <select id="input-status" name="status" class="form-control" style="height: 3rem;" value="{{property.status}}">
                      <option value="active">Active</option>
                      <option value="inactive">Inactive</option>
                    </select>
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label class="form-control-label">State*</label>
                    <select name="state" class="form-control" style="height: 3rem;" disabled>
                      {% for state in states %}
                        <option value="{{ state.id }}" {% if state.id == client.area.city.state.id %}selected{% endif %}>
                          {{ state.name }}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="col-lg-6"> 
                  <div class="form-group">
                    <label class="form-control-label">City*</label>
                    <select name="city" class="form-control" style="height: 3rem;" disabled>
                      {% for city in cities %}
                        <option value="{{ city.id }}" {% if city.id == client.area.city.id %}selected{% endif %}>
                          {{ city.name }}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group">
                    <label class="form-control-label">Area*</label>
                    <select name="area" class="form-control" style="height: 3rem;" disabled>
                      {% for area in areas %}
                        <option value="{{ area.id }}" {% if area.id == client.area.id %}selected{% endif %}>
                          {{ area.name }}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
              </div>
            
                <div class="text-center">
                  <button type="submit" class="btn btn-primary my-4">Update</button>
                </div>
            </form>
        </div>

      </div>
    </div>
  </div>
</div>

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    // Function to read and display root image file
    function readRootImage(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();

        reader.onload = function(e) {
          $('#root-image').attr('src', e.target.result);
        }

        reader.readAsDataURL(input.files[0]);
      }
    }

    // Handle root image file change event
    $('#root-input-image').on('change', function() {
      readRootImage(this);
    });
  });
</script>
{% endblock javascripts %}
